{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>Talina School</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <!-- Google Fonts Roboto -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap"
    />
    <!-- Bootstrap -->
    <link rel="stylesheet" href="{% static 'login/css/mdb.min.css' %}"/>
    <style>
     body {
           background-image: url( {% static 'dist/img/tilina-logo.jpeg' %});
           background-repeat: no-repeat;
           background-size: 30% 100%;
           background-color: #ffffff;
          }
   </style>
  </head>
  <body>
    <!-- Login starts here-->
    <div class="container">
       <form class="needs-validation" style="padding-top: 25vh ; margin: auto; width: 320px"  method="post" action="{% url 'login' %}" novalidate>
         {% csrf_token %}
        <img class="mb-3" src="{% static 'dist/img/login-avatar.jpg' %}" alt="tilina-logo" style="width: 120px; margin: auto; display: block;">
        <span class="text-danger mb-2">
           {% if form.errors %}
           <p class="error-msg">Your username and password didn't match. Please try again.</p>
           {% endif %}
           {% if next %}
           {% if user.is_authenticated %}
           <p class="error-msg"> Your account doesn't have access to this page. To proceed,
           please login with an account that has access.</p>
           {% else %}
       </span>
       <h4 class="text-center">Tilina FMS Login</h4>
{% endif %}

{% endif %}

        </span>
      <!-- Username input -->
      <div class="form-outline mb-4">
        <input type="text" id="id_username" name="username"  class="form-control" required/>
        <label class="form-label" for="username">Username</label>
        <div class="invalid-feedback">Please provide username</div>
      </div>

      <!-- Password input -->
      <div class="form-outline mb-4">
        <input type="password" id="id_password" class="form-control" name="password" required/>
        <label class="form-label" for="password">Password</label>
        <div class="invalid-feedback">Please provide password</div>
      </div>

      <!-- 2 column grid layout for inline styling -->
      <div class="row mb-4">
        <div class="col d-flex justify-content-center">
          <!-- Checkbox -->
          <div class="form-check">
            <input class="form-check-input" type="checkbox" value="" id="form2Example31" checked />
            <label class="form-check-label" for="form2Example31"> Remember me </label>
          </div>
        </div>

        <div class="col">
          <!-- Simple link -->
          <a href="#!">Forgot password?</a>
        </div>
      </div>

      <!-- Submit button -->
      <button type="submit" class="btn btn-primary btn-block mb-4">Log In</button>
      <input type="hidden" name="next" value="{{ next }}">

    </form>
    </div>

    </div>
    <script type="text/javascript" src="{% static 'login/js/mdb.min.js' %}"></script>

    {% block customscript %}
    <!-- Custom scripts -->
    <script type="text/javascript">
      // Validation
    (() => {
      'use strict';

      // Fetch all the forms we want to apply custom Bootstrap validation styles to
      const forms = document.querySelectorAll('.needs-validation');

      // Loop over them and prevent submission
      Array.prototype.slice.call(forms).forEach((form) => {
        form.addEventListener('submit', (event) => {
          if (!form.checkValidity()) {
            event.preventDefault();
            event.stopPropagation();
          }
          form.classList.add('was-validated');
        }, false);
      });
    })();
    </script>
  {% endblock customscript %}
  </body>
</html>
